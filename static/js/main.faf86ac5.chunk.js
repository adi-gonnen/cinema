(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(81)},44:function(e,t,a){},46:function(e,t,a){},50:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(38),i=a(0),c=a.n(i),o=a(23),r=(a(44),a(8)),l=a(9),s=a(11),m=a(10),u=a(12),d=a(82),v=(a(46),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"header flex"},c.a.createElement(d.a,{to:"/"},c.a.createElement("img",{src:"img/movie3.png",className:"header-img",alt:""})),c.a.createElement(d.a,{to:"/"},c.a.createElement("h1",{className:"header-title"},"My Cinema")))}}]),t}(i.Component)),h=a(83),f=a(5),b=(a(50),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={movie:a.props.movie,edit:!1,info:!1},a.editMovie=function(){a.setState({edit:!a.state.edit})},a.details=function(){a.setState({info:!a.state.info})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.movie;if(this.state.edit)return c.a.createElement(h.a,{to:"/movie/edit/".concat(e.imdbID)});if(this.state.info)return c.a.createElement(h.a,{to:"/movie/".concat(e.imdbID)});var t={backgroundImage:"url("+(e.Poster&&"N/A"!==e.Poster?e.Poster:"img/movie3.png")+")",backgroundSize:"cover",backgroundPosition:"center",backgroundrepeat:"no-repeat"};return c.a.createElement("div",{className:"movie-container flex column"},c.a.createElement(d.a,{to:"/movie/".concat(e.imdbID),movie:e,className:"a-title"},c.a.createElement("h2",{className:"title"},e.Title.toLowerCase().substring(0,36))),c.a.createElement(d.a,{to:"/movie/".concat(e.imdbID),style:t,movie:e,className:"a-img"}),c.a.createElement("p",{className:"director"},c.a.createElement("span",{className:"bold"},"Directed by: "),e.Director),c.a.createElement("div",{className:"year-container flex"},c.a.createElement("p",{className:"year"},e.Year,",\xa0 \xa0"),c.a.createElement("p",{className:"runtime"}," ",e.Runtime)),c.a.createElement("div",{className:"genre-list flex"},c.a.createElement("ul",{className:"ul-genre flex"},e.Genre.replace(/,/g,"").split(" ").map(function(e){return c.a.createElement("li",{className:"genre",key:e},e)}))),c.a.createElement("div",{className:"btns flex"},c.a.createElement("button",{className:"btn btn-edit",onClick:this.editMovie},c.a.createElement(f.a,{icon:"edit",title:"edit"})),c.a.createElement("button",{className:"btn btn-info ml15",onClick:this.details},c.a.createElement(f.a,{icon:"info",title:"details"}))))}}]),t}(i.Component)),p=a(24),g=a.n(p),E=a(33),N=a.n(E),y=a(13),O=a.n(y),x="cf5f5d9f",k=null,w=[],M="job",S=3;function D(e){return g.a.get("https://www.omdbapi.com/?i=".concat(e,"&page=2&apikey=").concat(x)).then(function(e){return e.data})}var I={getMovies:function(){if(null!==k)return k},getMovieById:D,addSearchWord:function(e){M=""===e?"first":e,S=1,w=k,k=null,console.log("key word: ",M)},getNextPage:function(e){S=e,k=null,console.log("page-service: ",S)},saveMovie:function(e){return e.imdbID?(t=e,new Promise(function(e,a){var n=k.findIndex(function(e){return t.imdbID===e.imdbID});-1!==n&&(k[n]=t),e(t),O()("Your movie has been saved!",{icon:"success",timer:2e3,className:"swal-text",button:!1})})):function(e){return new Promise(function(t,a){e.imdbID=N()(),e.Poster="img/movie3.png",k.push(e),t(e),O()("Your movie has been added!",{icon:"success",timer:2e3,className:"swal-text",button:!1})})}(e);var t},loadMovies:function(){return null===k?g.a.get("https://www.omdbapi.com/?s=".concat(M,"&page=").concat(S,"&type=movie&apikey=").concat(x)).then(function(e){if("Too many results."!==e.data.Error){k=[];var t=[];return e.data.Search.forEach(function(e){t.push(D(e.imdbID).then(function(e){k.push(e)}))}),Promise.all(t)}O()("Too many results. Try to be more specific").then(function(){}),k=w}).then(function(){return console.log("then:",k),k.sort(function(e,t){var a=e.Runtime.toLowerCase(),n=t.Runtime.toLowerCase();return a<n?-1:a>n?1:0}),k}):Promise.resolve(k)},deleteMovie:function(e){return O()({title:"Are you sure you want to delete this movie?",icon:"warning",buttons:["Cancel","Delete"],dangerMode:!0,className:"swal-warning"}).then(function(t){if(t)return new Promise(function(t,a){var n=k.findIndex(function(t){return t.imdbID===e});-1!==n&&k.splice(n,1),t()}).then(function(){O()("Your movie has been deleted!",{icon:"success",timer:2e3,className:"swal-text",button:!1})});O.a.close()})},checkDuplicate:function(e,t){var a=!1;return k.some(function(n){e.toLowerCase()===n.Title.toLowerCase()&&t!==n.imdbID&&(a=!0,O()("This movie already exist!").then(function(){return a}))}),a},searchMovieById:function(e){var t={};return k.some(function(a){e===a.imdbID&&(t=a)}),t},convertMonth:function(e){for(var t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=0;a<t.length;a++)if(a===e)return t[a]}},j=(a(72),function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e,a))).addMovie=function(){n.setState({add:!n.state.add})},n.handleSearch=function(e){n.searchWord=e.target.value},n.searchMovie=function(){console.log(n.searchWord),n.numberOfPage=1,I.addSearchWord(n.searchWord),I.loadMovies().then(function(e){console.log("movies with search: ",e),n.setState({movies:e})})},n.nextMovies=function(){console.log("page before: ",n.state.numberOfPage),n.setState({numberOfPage:+n.state.numberOfPage+1}),console.log("page after: ",n.state.numberOfPage),I.getNextPage(n.state.numberOfPage),I.loadMovies().then(function(e){console.log("movies with search: ",e),n.setState({movies:e})})},n.state={add:!1,movies:[],img:null,searchWord:"",numberOfPage:1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("page did mount: ",this.state.numberOfPage),I.loadMovies().then(function(t){e.setState({movies:t})})}},{key:"render",value:function(){return this.state.add?c.a.createElement(h.a,{to:{pathname:"/movie/edit/new",updateMovie:this.updateMovie}}):c.a.createElement("div",{className:"movies flex column"},c.a.createElement("div",{className:"sub-title flex"},c.a.createElement("p",null,"search movies:"),c.a.createElement("div",{className:"serach-container flex"},c.a.createElement("input",{placeholder:"enter key word/s",className:"search-line",onChange:this.handleSearch}),c.a.createElement("button",{onClick:this.searchMovie,className:"btn search-btn"},c.a.createElement("div",{className:"flex search"},c.a.createElement(f.a,{icon:"search",title:"search movie"})))),c.a.createElement("div",{className:"btns-home-container flex"},c.a.createElement("button",{onClick:this.nextMovies,className:"btn next-btn"},c.a.createElement("div",{className:"flex next-arrow"},c.a.createElement(f.a,{icon:"chevron-circle-right",title:"next 10 movies"}))),c.a.createElement("button",{onClick:this.addMovie,className:"btn add-btn"},c.a.createElement("div",{className:"flex plus-add"},c.a.createElement(f.a,{icon:"plus",title:"add movie"}))))),c.a.createElement("div",{className:"movie-preview"},c.a.createElement("ul",{className:"movies-list flex"},this.state.movies&&this.state.movies.map(function(e){return c.a.createElement("li",{className:"movie-list",key:e.imdbID},c.a.createElement(b,{movie:e}))}))))}}]),t}(i.Component)),C=(a(74),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={cancel:!1,movieId:a.props.match.params.movieId,movie:{},movieDate:null},a.componentDidMount=function(){var e=I.searchMovieById(a.state.movieId);a.setState({movie:e})},a.cancel=function(){a.setState({cancel:!a.state.cancel})},a.saveMovie=function(e){var t=a.state.movie;a.state.movieDate&&(t.Released=a.state.movieDate),console.log("movie to be saved:",t);var n=0;for(var i in t){if(""===t[i])return void O()("Fill all fields!").then(function(){});n++}if(n<5)O()("Fill all fields!").then(function(){});else{for(var c=t.Title,o=0;o<c.length;o++){var r=c;(32!==c.charCodeAt(o)&&c.charCodeAt(o)<65||c.charCodeAt(o)>122||c.charCodeAt(o)>90&&c.charCodeAt(o)<97)&&(r=c.substring(0,o)+c.substring(o+1,c.length),o--,c=r)}I.checkDuplicate(c,a.state.movieId)||(t.Title=c,e.preventDefault(),I.saveMovie(t),a.setState({cancel:!a.state.cancel}))}},a.handleTitle=function(e){var t=JSON.parse(JSON.stringify(a.state.movie));t.Title=e.target.value,a.setState({movie:t})},a.handleDirector=function(e){var t=JSON.parse(JSON.stringify(a.state.movie));t.Director=e.target.value,a.setState({movie:t})},a.handleYear=function(e){var t=JSON.parse(JSON.stringify(a.state.movie));t.Year=e.target.value,a.setState({movie:t})},a.handleReleased=function(e){var t,n=JSON.parse(JSON.stringify(a.state.movie)),i=Date.parse(e.target.value),c=new Date(i),o=I.convertMonth(c.getMonth());t=c.getDate()+" "+o+" "+c.getFullYear(),n.Year=c.getFullYear(),n.Released=e.target.value,a.setState({movieDate:t}),a.setState({movie:n})},a.handleRuntime=function(e){var t=JSON.parse(JSON.stringify(a.state.movie));t.Runtime=e.target.value,a.setState({movie:t})},a.handleGenre=function(e){var t=JSON.parse(JSON.stringify(a.state.movie));t.Genre=e.target.value,a.setState({movie:t})},a.deleteMovie=function(){I.deleteMovie(a.state.movieId).then(function(){a.setState({cancel:!a.state.cancel})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.state.cancel)return c.a.createElement(h.a,{to:"/"});var e=this.state.movie;return(new Date).setTime(Date.parse(e.Released)),c.a.createElement("div",{className:"edit flex column"},c.a.createElement("h1",{className:"edit-title"},e.imdbID?"Edit":"Add Movie"),c.a.createElement("div",{className:"form-edit flex column"},c.a.createElement("div",{className:"input-container flex"},c.a.createElement("p",null,"Title:"),c.a.createElement("input",{value:this.state.movie.Title,className:"input-edit",type:"text",onChange:this.handleTitle})),c.a.createElement("div",{className:"input-container flex"},c.a.createElement("p",null,"Director: "),c.a.createElement("input",{value:this.state.movie.Director,className:"input-edit",type:"text",onChange:this.handleDirector})),c.a.createElement("div",{className:"input-container flex"},c.a.createElement("p",null,"Released: "),c.a.createElement("input",{value:this.state.movie.Released,className:"input-edit",type:"date",onChange:this.handleReleased})),c.a.createElement("div",{className:"input-container flex"},c.a.createElement("p",null,"runtime: "),c.a.createElement("input",{value:this.state.movie.Runtime,className:"input-edit",type:"text",onChange:this.handleRuntime})),c.a.createElement("div",{className:"input-container flex"},c.a.createElement("p",null,"genre: "),c.a.createElement("input",{value:this.state.movie.Genre,className:"input-edit",type:"text",onChange:this.handleGenre})),c.a.createElement("div",{className:"btns btns-edit flex"},c.a.createElement("button",{className:"btn",onClick:this.saveMovie},c.a.createElement(f.a,{icon:"save",title:"save"})),c.a.createElement("button",{className:"btn btn-delete ml15",onClick:this.deleteMovie},c.a.createElement(f.a,{icon:"trash-alt",title:"delete"})),c.a.createElement("button",{className:"btn btn-back ml15",onClick:this.cancel},c.a.createElement(f.a,{icon:"undo",title:"back"})))))}}]),t}(i.Component)),P=(a(76),function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e,a))).editMovie=function(){n.setState({edit:!n.state.edit})},n.back=function(){n.setState({back:!n.state.back})},n.delete=function(){I.deleteMovie(n.state.movieId).then(function(){n.setState({back:!n.state.back})})},n.state={movieId:n.props.match.params.movieId,movie:{},back:!1,edit:!1},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=I.searchMovieById(this.state.movieId);this.setState({movie:e})}},{key:"render",value:function(){if(this.state.back)return c.a.createElement(h.a,{to:"/"});if(this.state.edit)return c.a.createElement(h.a,{to:"/movie/edit/".concat(this.props.match.params.movieId)});var e=this.state.movie,t=e.Poster;return null!==t&&"N/A"!==t||(t="img/movie3.png"),c.a.createElement("div",{className:"movie-details-container flex column"},c.a.createElement("h2",{className:"title title-details"},e.Title),c.a.createElement("div",{className:"movie-details flex column"},c.a.createElement("div",{className:"details-container flex"},c.a.createElement("img",{src:t||"img/movie3.png",alt:""}),c.a.createElement("div",{className:"movie-text flex column"},c.a.createElement("p",{className:"director mb15"},c.a.createElement("span",{className:"bold"},"Directed by: "),e.Director),c.a.createElement("p",{className:"actors mb15"},c.a.createElement("span",{className:"bold"},"Actors: "),e.Actors?e.Actors:"Gal Gadot"),c.a.createElement("p",{className:"rating mb15"},c.a.createElement("span",{className:"bold"},"IMDb rating: "),e.imdbRating?e.imdbRating:"2.5","/10"),c.a.createElement("p",{className:"released mb15"},c.a.createElement("span",{className:"bold"},"Released: "),e.Released),c.a.createElement("div",{className:"year-container mb15 flex"},c.a.createElement("p",{className:"runtime"}," ",e.Runtime,",\xa0"),c.a.createElement("p",{className:"language"}," ",e.Language?e.Language:"Jibrish")),c.a.createElement("p",{className:"plot"},e.Plot?e.Plot:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."))),c.a.createElement("div",{className:"btns flex"},c.a.createElement("button",{className:"btn btn-edit",onClick:this.editMovie},c.a.createElement(f.a,{icon:"edit",title:"edit"})),c.a.createElement("button",{className:"btn btn-delete ml15",onClick:this.delete},c.a.createElement(f.a,{icon:"trash-alt",title:"delete"})),c.a.createElement("button",{className:"btn btn-back ml15",onClick:this.back},c.a.createElement(f.a,{icon:"undo",title:"back"})))))}}]),t}(i.Component)),A=(a(78),a(6)),R=a(14),J=a(84),T=a(86),Y=a(85);A.b.add(R.b),A.b.add(R.g),A.b.add(R.h),A.b.add(R.e),A.b.add(R.i),A.b.add(R.c),A.b.add(R.d),A.b.add(R.f),A.b.add(R.a);var L=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(J.a,null,c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"App"},c.a.createElement(v,{className:"App-header"})),c.a.createElement(T.a,{className:"body"},c.a.createElement(Y.a,{exact:!0,path:"/",component:j}),c.a.createElement(Y.a,{exact:!0,path:"/movie",component:j}),c.a.createElement(Y.a,{exact:!0,path:"/movie/:movieId",component:P}),c.a.createElement(Y.a,{exact:!0,path:"/movie/edit/:movieId",component:C}))))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(18),G=a(37),B=Object(W.b)({movieState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_MOVIE":return Object(n.a)(e).concat([{id:t.id,movie:t.movie}]);default:return e}}}),F=Object(W.c)(B);Object(o.render)(c.a.createElement(G.a,{store:F},c.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,2,1]]]);
//# sourceMappingURL=main.faf86ac5.chunk.js.map